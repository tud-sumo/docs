
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../9_gui/">
      
      
        <link rel="next" href="../11_examples/">
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Plotting Data - TUD-SUMO Wiki</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#plotting-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="TUD-SUMO Wiki" class="md-header__button md-logo" aria-label="TUD-SUMO Wiki" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TUD-SUMO Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Plotting Data
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="TUD-SUMO Wiki" class="md-nav__button md-logo" aria-label="TUD-SUMO Wiki" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    TUD-SUMO Wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../2_getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../3_basic_sim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Simulations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../4_demand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Traffic Demand
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../5_interactions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interacting with the Simulation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_tracked_objs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tracked Objects
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../7_traffic_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Traffic Control
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../8_events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../9_gui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GUI & Videos
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Plotting Data
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Plotting Data
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#shared-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Shared Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Shared Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Common Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#colours" class="md-nav__link">
    <span class="md-ellipsis">
      Colours
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display-saving-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      Display &amp; Saving Graphs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plotter-class" class="md-nav__link">
    <span class="md-ellipsis">
      Plotter Class
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Plotter Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#plotting-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Plotting Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      Example Graphs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiplotter-class" class="md-nav__link">
    <span class="md-ellipsis">
      MultiPlotter Class
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MultiPlotter Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#plotting-functions_1" class="md-nav__link">
    <span class="md-ellipsis">
      Plotting Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../11_examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#shared-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Shared Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Shared Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Common Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#colours" class="md-nav__link">
    <span class="md-ellipsis">
      Colours
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display-saving-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      Display &amp; Saving Graphs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plotter-class" class="md-nav__link">
    <span class="md-ellipsis">
      Plotter Class
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Plotter Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#plotting-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Plotting Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-graphs" class="md-nav__link">
    <span class="md-ellipsis">
      Example Graphs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiplotter-class" class="md-nav__link">
    <span class="md-ellipsis">
      MultiPlotter Class
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MultiPlotter Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#plotting-functions_1" class="md-nav__link">
    <span class="md-ellipsis">
      Plotting Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="plotting-data">Plotting Data</h1>
<p>TUD-SUMO aims to provide plotting functions with each feature. These are specifically tailored to the data collected in the <code>sim_data</code> and have a unified and standardised form. It has also been designed to facilitate plotting a large number of graphs, and graphs for different scenarios. All graphs for a specific simulation can, therefore, be saved with the same label and in specific locations.</p>
<p>Two classes are provided for plotting simulation data, <code>Plotter</code> and <code>MultiPlotter</code>. <code>Plotter</code> is used for plotting data from one simulation, whilst <code>MultiPlotter</code> is used to plot data from multiple simulations. The two classes share much of the same usage, but differ in their initialisation. These shared settings and the classes themselves are explained below.</p>
<h2 id="shared-settings">Shared Settings</h2>
<h3 id="common-parameters">Common Parameters</h3>
<p>Whenever possible, all plotting functions (for <code>Plotter</code> and <code>MultiPlotter</code>) include <code>time_range</code> and <code>show_events</code> parameters. By default, graphs are plotted for the data throughout the whole simulation. <code>time_range</code> can be used to plot a specific duration within the simulation, and is defined in <strong>in plotter time units</strong>, ie. hours or minutes. <code>show_events</code> can either be a single event ID, list of event IDs or an event status ('<em>scheduled</em>', '<em>active</em>' or '<em>completed</em>'), which will plot all events with this status. To plot all events, set <code>show_events = "all"</code>. By default, no events are plotted.</p>
<p>Usage examples of <code>time_range</code> and <code>show_events</code>, as well as the resulting plots are shown below.</p>
<div class="highlight"><pre><span></span><code><span class="n">plt</span> <span class="o">=</span> <span class="n">Plotter</span><span class="p">(</span><span class="s2">&quot;example_data.pkl&quot;</span><span class="p">,</span> <span class="n">time_unit</span><span class="o">=</span><span class="s2">&quot;minutes&quot;</span><span class="p">)</span>

<span class="c1"># Figure 1</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot_cumulative_curve</span><span class="p">()</span>

<span class="c1"># Figure 2</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot_cumulative_curve</span><span class="p">(</span><span class="n">time_range</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>

<span class="c1"># Figure 3</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot_cumulative_curve</span><span class="p">(</span><span class="n">time_range</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="n">show_events</span><span class="o">=</span><span class="s2">&quot;bottleneck&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Time range/events example" src="../img/plots/range_event_ex.png" /></p>
<h3 id="colours">Colours</h3>
<p>Certain functions use a <code>plt_colour</code> parameter that can be used to set the line colour when plotting graphs. All matplotlib colours are valid parameters. By default, TUD-SUMO uses the <a href="https://www.tudelft.nl/huisstijl/bouwstenen/kleur">TU Delft colour palette</a> as below, and so these colours are also valid parameters.</p>
<p><img alt="TU Delft colour palette" src="../img/palette.png" /></p>
<h3 id="display-saving-graphs">Display &amp; Saving Graphs</h3>
<p>All graphs can be saved or shown onscreen with the <code>save_fig</code> parameter. If a valid filename is given, the resulting plot is saved, otherwise, it is shown onscreen. An example is shown below.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Display trajectories graph</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot_trajectories</span><span class="p">([</span><span class="s2">&quot;edge_1&quot;</span><span class="p">,</span> <span class="s2">&quot;edge_2&quot;</span><span class="p">,</span> <span class="s2">&quot;edge_3&quot;</span><span class="p">])</span>

<span class="c1"># Save trajectories graph to &#39;figs/trajectories.png&#39;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot_trajectories</span><span class="p">([</span><span class="s2">&quot;edge_1&quot;</span><span class="p">,</span> <span class="s2">&quot;edge_2&quot;</span><span class="p">,</span> <span class="s2">&quot;edge_3&quot;</span><span class="p">],</span> <span class="n">save_fig</span><span class="o">=</span><span class="s2">&quot;figs/trajectories.png&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="plotter-class">Plotter Class</h2>
<p>The <code>Plotter</code> class is initialised with a <strong>single</strong> corresponding active <code>Simulation</code> object or data file from previous runs. This is the only required parameter, although the other settings are:</p>
<ul>
<li><code>sim_label</code>: Adds a string as a label to the title of all plots.</li>
<li><code>time_unit</code>: Sets the time scale used for all plots, either '<em>steps</em>', '<em>s</em>' (seconds), '<em>m</em>' (minutes) or '<em>hr</em>' (hours).</li>
<li><code>save_fig_loc</code>: Sets the location for all saved figures.</li>
<li><code>save_fig_dpi</code>: Resolution for saved figures.</li>
<li><code>overwrite_figs</code>: Denotes whether to overwrite old figures when saving.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">tud_sumo.plot</span><span class="w"> </span><span class="kn">import</span> <span class="n">Plotter</span>

<span class="c1"># Simple initialisation</span>
<span class="n">plt</span> <span class="o">=</span> <span class="n">Plotter</span><span class="p">(</span><span class="n">my_sim</span><span class="p">)</span>

<span class="n">plt</span> <span class="o">=</span> <span class="n">Plotter</span><span class="p">(</span><span class="n">simulation</span><span class="o">=</span><span class="s2">&quot;example_data.json&quot;</span><span class="p">,</span>
              <span class="n">sim_label</span><span class="o">=</span><span class="s2">&quot;Example&quot;</span><span class="p">,</span>
              <span class="n">time_unit</span><span class="o">=</span><span class="s2">&quot;hr&quot;</span><span class="p">,</span>
              <span class="n">save_fig_loc</span><span class="o">=</span><span class="s2">&quot;figs/&quot;</span><span class="p">,</span>
              <span class="n">save_fig_dpi</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
              <span class="n">overwrite_figs</span><span class="o">=</span><span class="kc">False</span>
             <span class="p">)</span>
</code></pre></div>
<h3 id="plotting-functions">Plotting Functions</h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please note that some functions will require objects to be created or tracked.</p>
</div>
<p>All (current) plotting functions are listed in the table below. Several graph examples are shown beneath the table.</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Plot</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>plot_vehicle_data()</code></td>
<td>Network-wide vehicle data such as the number of vehicles, number of waiting vehicles, Total Waiting Time (TWT), Total Time Spent (TTS) or delay.</td>
</tr>
<tr>
<td><code>plot_detector_data()</code></td>
<td>Detector specific data, either speeds, vehicle counts or occupancies.</td>
</tr>
<tr>
<td><code>plot_edge_data()</code></td>
<td>Tracked edge data, either flows, speeds, densities, vehicle counts or occupancies.</td>
</tr>
<tr>
<td><code>plot_junc_flows()</code></td>
<td>Either junction inflow &amp; outflow, or number of vehicles in an intersection.</td>
</tr>
<tr>
<td><code>plot_tl_colours()</code></td>
<td>Traffic light signal settings over time.</td>
</tr>
<tr>
<td><code>plot_demand()</code></td>
<td>Flow rate, either network-wide or for a specific route or an OD pair. Note, this only includes demand added to <code>DemandProfile</code>(s).</td>
</tr>
<tr>
<td><code>plot_od_trip_times()</code></td>
<td>Average trip times for OD pairs.</td>
</tr>
<tr>
<td><code>plot_trip_time_histogram()</code></td>
<td>Trip time distribution as a histogram.</td>
</tr>
<tr>
<td><code>plot_throughput()</code></td>
<td>Rate of completed trips in vehicles per hour.</td>
</tr>
<tr>
<td><code>plot_cumulative_curve()</code></td>
<td>Cumulative curve, either for network-wide data or for specific inflow and outflow detectors.</td>
</tr>
<tr>
<td><code>plot_space_time_diagram()</code></td>
<td>Space-time diagram based on <code>step_vehicles</code> data in tracked edges.</td>
</tr>
<tr>
<td><code>plot_trajectories()</code></td>
<td>Trajectories based on <code>step_vehicles</code> data in tracked edges. Use <code>lane_idx</code> to plot lane-specific data.</td>
</tr>
<tr>
<td><code>plot_fundamental_diagram()</code></td>
<td>Fundamental diagram based on tracked edge data. A linear regression model can be used to plot a line of best fit.</td>
</tr>
<tr>
<td><code>plot_rm_rate()</code></td>
<td>Metering rate for a ramp metering controller.</td>
</tr>
<tr>
<td><code>plot_rm_queuing()</code></td>
<td>On-ramp queue length/spillback for a ramp meter, if tracked.</td>
</tr>
<tr>
<td><code>plot_rm_rate_queuing()</code></td>
<td>Metering rate and queue length/spillback for a ramp meter, if tracking queuing.</td>
</tr>
<tr>
<td><code>plot_rm_rate_detector_data()</code></td>
<td>Metering rate and corresponding detector data.</td>
</tr>
<tr>
<td><code>plot_vsl_data()</code></td>
<td>Variable speed limit controller settings and average speeds on controlled edges.</td>
</tr>
<tr>
<td><code>plot_rg_data()</code></td>
<td>Number of vehicles diverted by a route guidance controller.</td>
</tr>
</tbody>
</table>
<h3 id="example-graphs">Example Graphs</h3>
<ol>
<li>
<p><code>plt.plot_space_time_diagram()</code> <img alt="ST Diagram" src="../img/plots/st.png" /></p>
</li>
<li>
<p><code>plt.plot_vehicle_data(data_key"no_vehicles", plot_cumulative=True, show_events=False, save_fig="n_vehicles.png")</code> <img alt="Vehicle data" src="../img/plots/n_vehicles.png" /></p>
</li>
<li>
<p><code>plt.plot_junc_flows(junc_id="utsc", show_events=False, save_fig="junc_flows.png")</code> <img alt="Junction flows" src="../img/plots/junc_flows.png" /></p>
</li>
<li>
<p><code>plt.plot_tl_colours(junc_id="utsc", save_fig="tl_colours.png")</code> <img alt="Signal phases" src="../img/plots/tl_colours.png" /></p>
</li>
<li>
<p><code>plt.plot_cumulative_curve(show_events=False, save_fig="cumulative_curve.png")</code> <img alt="Cumulative curve" src="../img/plots/cumulative_curve.png" /></p>
</li>
<li>
<p><code>plt.plot_trajectories(["126730026", "1191885773", "1191885771", "126730171", "1191885772", "948542172", "70944365", "308977078", "1192621075"], lane_idx=0, save_fig="trajectories.png", show_events=False)</code> <img alt="Trajectories" src="../img/plots/trajectories.png" /></p>
</li>
<li>
<p><code>plt.plot_rm_rate(rm_id="crooswijk_meter", show_events=False, save_fig="rm_rate.png")</code> <img alt="Metering rate" src="../img/plots/rm_rate.png" /></p>
</li>
<li>
<p><code>plt.plot_vsl_data(vsl_id="vsl", show_events=False, save_fig="vsl_data.png")</code> <img alt="VSL data" src="../img/plots/vsl_data.png" /></p>
</li>
</ol>
<h2 id="multiplotter-class">MultiPlotter Class</h2>
<p>The <code>MultiPlotter</code> class can be used to plot the data from multiple simulations on the same graph. During initialisation, its parameters are:</p>
<ul>
<li><code>scenario_label</code>: Adds a string as a label to the title of all plots.</li>
<li><code>units</code>: Simulation data units, either '<em>metric</em>', '<em>imperial</em>' or '<em>uk</em>'. This must match all added simulations.</li>
<li><code>time_unit</code>: Sets the time scale used for all plots, either '<em>steps</em>', '<em>s</em>' (seconds), '<em>m</em>' (minutes) or '<em>hr</em>' (hours).</li>
<li><code>sim_data_loc</code>: Sets the location for all simulation datasets.</li>
<li><code>save_fig_loc</code>: Sets the location for all saved figures.</li>
<li><code>save_fig_dpi</code>: Resolution for saved figures.</li>
<li><code>overwrite_figs</code>: Denotes whether to overwrite old figures when saving.</li>
</ul>
<p>Once the <code>MultiPlotter</code> object has been created, simulation datasets are added using the <code>MultiPlotter.add_simulations()</code> function. After this, all added datasets are plotted on all graphs. Datasets can either be plotted individually or in groups, where graphs will show the minimum, maximum and average values. Note that datasets can only be added through a previously saved <code>sim_data</code> file, and cannot be an active simulation as with <code>Plotter</code>.</p>
<p>There are four parameters for <code>MultiPlotter.add_simulations()</code>:</p>
<ul>
<li><code>simulations</code>: A list of filenames of <code>sim_data</code> files. This can also be a single filename.</li>
<li><code>labels</code>: A list of labels for each simulation, which must have the same length as <code>simulations</code>. If <code>labels</code> is not given, datasets use their scenario name as the label.</li>
<li><code>groups</code>: A list of group names, or a single group. If a list is given, the list must have the same length as <code>simulation</code> and datasets are assigned groups element-wise. If a single group ID is given, all datasets listed in <code>simulations</code> are included in this group.</li>
<li><code>pbar</code>: A boolean denoting whether to show a progress bar when loading datasets.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All simulation datasets must have the same <strong><em>start time, end time, step length and unit</em></strong>. It is assumed all datasets correspond to the <strong><em>same scenario</em></strong>.</p>
</div>
<p>An example usage of this is shown below:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">tud_sumo.plot</span><span class="w"> </span><span class="kn">import</span> <span class="n">MultiPlotter</span>

<span class="n">mplt</span> <span class="o">=</span> <span class="n">MultiPlotter</span><span class="p">(</span><span class="n">scenario_label</span><span class="o">=</span><span class="s2">&quot;RL Models&quot;</span><span class="p">,</span> <span class="c1"># Add &#39;RL Models&#39; as a label to all graphs</span>
                    <span class="n">sim_data_loc</span><span class="o">=</span><span class="s2">&quot;data/&quot;</span><span class="p">,</span>       <span class="c1"># All sim_data files are loaded from &#39;data/&#39;</span>
                    <span class="n">save_fig_loc</span><span class="o">=</span><span class="s2">&quot;figs/&quot;</span><span class="p">,</span>       <span class="c1"># All graphs will be saved in &#39;figs/&#39;</span>
                    <span class="n">time_unit</span><span class="o">=</span><span class="s2">&quot;hours&quot;</span><span class="p">)</span>          <span class="c1"># Use &#39;hours&#39; as the unit for all graphs</span>

<span class="c1"># Add a single no-control simulation dataset</span>
<span class="c1"># &#39;no_control.pkl&#39; will be plotted individually</span>
<span class="n">mplt</span><span class="o">.</span><span class="n">add_simulations</span><span class="p">(</span><span class="s2">&quot;no_control.pkl&quot;</span><span class="p">)</span>

<span class="c1"># Add 3 simulation datasets, all in the &#39;baseline&#39; group</span>
<span class="c1"># These datasets will be plotted together, with the minimum/maximum and average values</span>
<span class="n">mplt</span><span class="o">.</span><span class="n">add_simulations</span><span class="p">([</span><span class="s2">&quot;baseline1.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;baseline2.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;baseline3.pkl&quot;</span><span class="p">],</span> <span class="n">groups</span><span class="o">=</span><span class="s2">&quot;baseline&quot;</span><span class="p">)</span>

<span class="c1"># Add 3 simulation datasets, defining a label for each</span>
<span class="c1"># No groups are assigned, so all datasets will be plotted individually</span>
<span class="n">mplt</span><span class="o">.</span><span class="n">add_simulations</span><span class="p">([</span><span class="s2">&quot;model1.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;model2.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;model3.pkl&quot;</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Model 1&quot;</span><span class="p">,</span> <span class="s2">&quot;Model 2&quot;</span><span class="p">,</span> <span class="s2">&quot;Model 3&quot;</span><span class="p">])</span>

<span class="c1"># Add 4 simulation datasets, split into two groups</span>
<span class="c1"># &#39;model4a/b.pkl&#39; and &#39;model5a/b.pkl&#39; will both be grouped together</span>
<span class="n">mplt</span><span class="o">.</span><span class="n">add_simulations</span><span class="p">([</span><span class="s2">&quot;model4a.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;model4b.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;model5a.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;model5b.pkl&quot;</span><span class="p">],</span>
                     <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Model 4&quot;</span><span class="p">,</span> <span class="s2">&quot;Model 4&quot;</span><span class="p">,</span> <span class="s2">&quot;Model 5&quot;</span><span class="p">,</span> <span class="s2">&quot;Model 5&quot;</span><span class="p">])</span>
</code></pre></div>
<h3 id="plotting-functions_1">Plotting Functions</h3>
<p>The available functions in the <code>MultiPlotter</code> class are listed below. All functions use 2 extra parameters than in the <code>Plotter</code> class; <code>plot_groups</code> and <code>plot_range</code>. <code>plot_groups</code> allows for only specific groups to be plotted by passing a list of dataset group IDs. By default, all groups are plotted. <code>plot_range</code> denotes whether to plot the shaded region between minimum and maximum values of groups on certain graphs.</p>
<ol>
<li><code>mplt.plot_vehicle_data("tts")</code> <img alt="Vehicle data" src="../img/plots/mplt_vehicle_data.png" /></li>
<li><code>mplt.plot_detector_data("upstream_i0", "speeds", aggregation_steps=10)</code> <img alt="Detector data" src="../img/plots/mplt_detector_data.png" /></li>
<li><code>mplt.plot_edge_data("downstream_e1", "densities", aggregation_steps=10)</code> <img alt="Edge data" src="../img/plots/mplt_edge_data.png" /></li>
<li><code>mplt.plot_throughput()</code> <img alt="Throughput" src="../img/plots/mplt_throughput.png" /></li>
<li><code>mplt.plot_statistics("tts")</code> <img alt="Statistics" src="../img/plots/mplt_statistics.png" /></li>
<li><code>mplt.plot_rm_rate("ramp_meter_id")</code> <img alt="Metering Rate" src="../img/plots/mplt_rm_rates.png" /></li>
<li><code>plot_rm_queue_length("crooswijk_meter")</code> <img alt="RM Queues" src="../img/plots/mplt_rm_queue.png" /></li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>