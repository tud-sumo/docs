
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../2_getting_started/">
      
      
        <link rel="next" href="../4_demand/">
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Basic Simulations - TUD-SUMO Wiki</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#basic-simulations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="TUD-SUMO Wiki" class="md-header__button md-logo" aria-label="TUD-SUMO Wiki" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TUD-SUMO Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Basic Simulations
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="TUD-SUMO Wiki" class="md-nav__button md-logo" aria-label="TUD-SUMO Wiki" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    TUD-SUMO Wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../2_getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Basic Simulations
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Basic Simulations
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sumo-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      SUMO Scenarios
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initialising-the-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      Initialising the Simulation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Simulation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ending-the-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      Ending the Simulation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-data-collection" class="md-nav__link">
    <span class="md-ellipsis">
      Automatic Data Collection
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saving-summarising-data" class="md-nav__link">
    <span class="md-ellipsis">
      Saving &amp; Summarising Data
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../4_demand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Traffic Demand
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../5_interactions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interacting with the Simulation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_tracked_objs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tracked Objects
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../7_traffic_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Traffic Control
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../8_events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../9_gui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GUI & Videos
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../10_plotting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plotting Data
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../11_examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sumo-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      SUMO Scenarios
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initialising-the-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      Initialising the Simulation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Simulation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ending-the-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      Ending the Simulation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-data-collection" class="md-nav__link">
    <span class="md-ellipsis">
      Automatic Data Collection
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saving-summarising-data" class="md-nav__link">
    <span class="md-ellipsis">
      Saving &amp; Summarising Data
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="basic-simulations">Basic Simulations</h1>
<h2 id="sumo-scenarios">SUMO Scenarios</h2>
<p>Before anything can be simulated, all the necessary SUMO scenario files are required. This will typically include a '<em>.sumocfg</em>', '<em>.neteditcfg</em>', '<em>.net.xml</em>', '<em>.rou.xml</em>' and '<em>.add.xml</em>'. The simplest way to create a scenario and these files is using netedit, about which there is more information <a href="https://sumo.dlr.de/docs/Netedit/index.html">here</a>.</p>
<h2 id="initialising-the-simulation">Initialising the Simulation</h2>
<p>All simulations in TUD-SUMO are created and run using the <code>Simulation</code> class, which is initialised as below. A scenario name and description are optional, but can be useful when running multiple similar simulations.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">tud_sumo.simulation</span><span class="w"> </span><span class="kn">import</span> <span class="n">Simulation</span>

<span class="n">my_sim</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">(</span><span class="n">scenario_name</span><span class="o">=</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="n">scenario_desc</span><span class="o">=</span><span class="s2">&quot;Example simulation.&quot;</span><span class="p">)</span>
</code></pre></div>
<p>To then start the simulation and create the connection to SUMO through TraCI, use <code>Simulation.start()</code>. This can very easily be done using the '<em>.sumocfg</em>' file created by netedit, which links all to all other files, however, the <code>net_file</code>, <code>route_file</code>, <code>add_file</code> and <code>gui_file</code> parameters can also be used to give each file individually. Whether or not to use the GUI is also set here, although note this cannot be changed throughout the simulation.</p>
<div class="highlight"><pre><span></span><code><span class="n">my_sim</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s2">&quot;example_scenario.sumocfg&quot;</span><span class="p">,</span>
             <span class="n">gui</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
             <span class="n">get_individual_vehicle_data</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
             <span class="n">units</span><span class="o">=</span><span class="s2">&quot;metric&quot;</span><span class="p">,</span>
             <span class="n">suppress_pbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
             <span class="n">seed</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">)</span>
</code></pre></div>
<p>The <code>get_individual_vehicle_data</code> is an important parameter denoting whether to collect and save dynamic information for all vehicles (ie. position, speed, acceleration etc.) at each step. This can be useful for small scenarios where this data may be required and computation time is less of an issue, such as single intersections, however, this should be set to false for large scenarios, such as large motorway networks.</p>
<p>3 unit settings are supported '<em>metric</em>' (km/kmph), '<em>imperial</em>' (mi/mph) and '<em>UK</em>' (km/mph). All data collected and saved are in these units, and this setting cannot be changed later.</p>
<p>The <code>seed</code> parameter is optional and affects both the SUMO simulation and the <code>Simulation</code> class. Random seeds in SUMO primarily affects how vehicles are added into the simulation (more information can be found <a href="https://sumo.dlr.de/docs/Simulation/Randomness.html">here</a>). The seed can be set to random either by not using the parameter or by setting it to '<em>random</em>'.</p>
<p>By default, a progress bar is automatically created when simulating more than 10 steps at a time. This can be skipped by setting <code>suppress_pbar = False</code>. </p>
<p>Tracked junctions/edges, controllers etc. can be initialised at this point. These objects can be added individually, or if all of their parameters are saved in a dictionary or '<em>.json</em>' or '<em>.pkl</em>' file, these can be read using the <code>Simulation.load_objects()</code> function. This dictionary can be created manually, or can be saved with <code>Simulation.save_objects()</code> for ease of use. An example of this resulting file can be found <a href="https://github.com/DAIMoNDLab/tud-sumo-examples/blob/main/a20_example/objects.json">here</a>, otherwise, more information on the objects themselves can be found in their respective sections.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Save object initialisation parameters</span>
<span class="n">my_sim</span><span class="o">.</span><span class="n">save_objects</span><span class="p">(</span><span class="s2">&quot;objects.pkl&quot;</span><span class="p">)</span>

<span class="c1"># Initialise objects using the same parameters</span>
<span class="n">my_sim</span><span class="o">.</span><span class="n">load_objects</span><span class="p">(</span><span class="s2">&quot;objects.pkl&quot;</span><span class="p">)</span>
</code></pre></div>
<p>The following objects can be included in this dictionary:</p>
<ul>
<li>'<em>edges</em>': List of edge IDs for tracking.</li>
<li>'<em>junctions</em>': <a href="../6_tracked_objs/#tracked-junctions">Tracked junction</a> initialisation parameters.</li>
<li>'<em>phases</em>': Traffic light <a href="../7_traffic_control/#traffic-signal-control">phase dictionary</a>.</li>
<li>'<em>controllers</em>': Dictionary containing <a href="../7_traffic_control/#variable-speed-limits">VSL</a> and/or <a href="../7_traffic_control/#dynamic-route-guidance">RG</a> controller parameters.</li>
<li>'<em>events</em>': Dictionary containing <a href="../8_events/#scheduled-events">scheduled event</a> parameters (previous dynamic events are saved in the resulting file).</li>
<li>'<em>demand</em>': Dictionary containing a <a href="../4_demand/">demand profile</a> table. These are made by creating a demand profile and saving using <code>Simulation.save_objects()</code>. </li>
<li>'<em>routes</em>': A dictionary containing new routes by their ID and a (2x1) array representing the origin and destination.</li>
</ul>
<h2 id="running-the-simulation">Running the Simulation</h2>
<p>The simulation is run using the <code>Simulation.step_through()</code> function. When no parameters are given, the simulation will run through one step by default. Otherwise, using <code>n_steps</code> will run the simulation for a specific number of steps, <code>end_step</code> will run the simulation until a specific step and <code>n_seconds</code> will run the simulation for a specific amount of time (in seconds).</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Run 1 step</span>
<span class="n">my_sim</span><span class="o">.</span><span class="n">step_through</span><span class="p">()</span>

<span class="c1"># Run for 100 steps</span>
<span class="n">my_sim</span><span class="o">.</span><span class="n">step_through</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># Run until step 200</span>
<span class="n">my_sim</span><span class="o">.</span><span class="n">step_through</span><span class="p">(</span><span class="n">end_step</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>

<span class="c1"># Run for 100 seconds (where step length = 0.5)</span>
<span class="n">my_sim</span><span class="o">.</span><span class="n">step_through</span><span class="p">(</span><span class="n">n_seconds</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</code></pre></div>
<p>A control loop can, therefore, be created as below. A progress bar is automatically created when simulating for 10 or more steps in one call of <code>Simulation.step_through()</code>. In order to create a progress bar that is consistent between separate calls, use the <code>pbar_max_steps</code> parameter and set this to the total length of the simulation.</p>
<div class="highlight"><pre><span></span><code><span class="n">n</span><span class="p">,</span> <span class="n">sim_dur</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2500</span>
<span class="k">while</span> <span class="n">my_sim</span><span class="o">.</span><span class="n">curr_step</span> <span class="o">&lt;</span> <span class="n">sim_dur</span><span class="p">:</span> <span class="c1"># or use my_sim.curr_time</span>

    <span class="c1"># Step through n steps.</span>
    <span class="n">my_sim</span><span class="o">.</span><span class="n">step_through</span><span class="p">(</span><span class="n">n_steps</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">pbar_max_steps</span><span class="o">=</span><span class="n">sim_dur</span><span class="p">)</span>

    <span class="c1"># Perform control</span>
    <span class="c1"># ...</span>
</code></pre></div>
<p>To include a warmup period where no data is collected, set <code>keep_data = True</code>.</p>
<div class="highlight"><pre><span></span><code><span class="n">warmup_length</span> <span class="o">=</span> <span class="mi">120</span>
<span class="n">my_sim</span><span class="o">.</span><span class="n">step_through</span><span class="p">(</span><span class="n">n_seconds</span><span class="o">=</span><span class="n">warmup_length</span><span class="p">,</span> <span class="n">keep_data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<h2 id="ending-the-simulation">Ending the Simulation</h2>
<p>A simulation can be run until it is finished as below. The <code>Simulation.is_running()</code> function returns false once the simulation is over, which is determined as happening once all defined vehicles have finished their run through the simulation. It is then best to end the simulation using <code>Simulation.end()</code>, which closes the connection to TraCI.</p>
<div class="highlight"><pre><span></span><code><span class="k">while</span> <span class="n">my_sim</span><span class="o">.</span><span class="n">is_running</span><span class="p">():</span>
    <span class="n">my_sim</span><span class="o">.</span><span class="n">step_through</span><span class="p">()</span>

<span class="n">my_sim</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
</code></pre></div>
<h2 id="automatic-data-collection">Automatic Data Collection</h2>
<p>One of the major advantages of TUD-SUMO is the automatic data collection. This involves automatically collecting all basic simulation information into a <code>sim_data</code> dictionary. An example of this can be seen in examples directory in the main TUD-SUMO repository, however, the main structure is as follows:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;detectors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;junctions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;edges&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;controllers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;vehicles&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;demand&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;trips&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;events&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;all_vehicles&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;start&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;end&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;step_len&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;METRIC&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;seed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;sim_start&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;08/07/2024, 13:00:00&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;sim_end&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;08/07/2024, 13:00:10&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>Detectors will automatically collect vehicle speeds and counts for each time step, as well as the IDs of each vehicle that passed over it, whilst occupancies are also collected for mutli-entry-exit detectors. These will be stored under '<em>data/detectors/{detector_id}</em>', with '<em>type</em>', '<em>position</em>', '<em>speeds</em>', '<em>vehicle_counts</em>', '<em>vehicle_ids</em>' and '<em>occupancies</em>'.</p>
<p>Vehicle data will include the number of vehicles at each step, '<em>twt</em>' (No. waiting vehicles * step length), '<em>tts</em>' (N. vehicles * step length), '<em>delay</em>' (calculated based on vehicle speed and ideal free-flow speed) and '<em>to_depart</em>' (the number of vehicles waiting to be inserted at each time step).</p>
<p>Demand is only included when dynamically adding demand, ie. not when demand is solely defined in the '<em>.rou.xml</em>' file. This dictionary will contain two objects; '<em>headers</em>' and a list of demand profile tables. Each table in '<em>profiles</em>' will contain a (9 x n) sized array with information on flows added through demand profiles, with its headers listed under '<em>headers</em>'.</p>
<p>Trip data will contain data for incomplete and completed trips. This is stored under '<em>data/trips</em>' and then either '<em>incomplete</em>' or '<em>completed</em>'. Each trip will store the '<em>route_id</em>', '<em>vehicle_type</em>', '<em>departure</em>', '<em>arrival</em>' (or removal), '<em>origin</em>' and '<em>destination</em>'.</p>
<p>Junction, edge, controller and event data are only included when necessary. The <code>all_vehicles</code> data will contain all the individual vehicle data at each time step, so it is only included when <code>get_individual_vehicle_data</code> is set to true when starting the simulation.</p>
<p>The <code>sim_data</code> dictionary can be reset at any point using the <code>Simulation.reset_data()</code> function.</p>
<div class="highlight"><pre><span></span><code><span class="n">my_sim</span><span class="o">.</span><span class="n">reset_data</span><span class="p">()</span>
</code></pre></div>
<h2 id="saving-summarising-data">Saving &amp; Summarising Data</h2>
<p>All the data collected throughout the simulation can be saved at any point using the <code>Simulation.save_data()</code> function. This will save the <code>sim_data</code> dictionary as a file in the specified directory. Either JSON or pickle files are supported, simply denoted by a '<em>.json</em>' or '<em>.pkl</em>' extension in the filename.</p>
<div class="highlight"><pre><span></span><code><span class="n">my_sim</span><span class="o">.</span><span class="n">save_data</span><span class="p">(</span><span class="s2">&quot;data/example_data.json&quot;</span><span class="p">)</span>
<span class="n">my_sim</span><span class="o">.</span><span class="n">save_data</span><span class="p">(</span><span class="s2">&quot;data/example_data.pkl&quot;</span><span class="p">)</span>
</code></pre></div>
<p>All data saved by a simulation or a simulation data file can be summarised using the <code>Simulation.print_summary()</code> or <code>print_summary()</code> functions. This will print a summary of the collected data (ie. number of vehicles, TTS, controllers, events etc.), as well as some information about the simulation itself (ie. scenario name/description, runtime, seed etc.). This summary can be saved to a '<em>.txt</em>' file using the <code>save_file</code> parameter. An example summary is shown below.</p>
<div class="highlight"><pre><span></span><code><span class="n">my_sim</span><span class="o">.</span><span class="n">print_summary</span><span class="p">(</span><span class="n">save_file</span><span class="o">=</span><span class="s2">&quot;data/example_summary.txt&quot;</span><span class="p">)</span>

<span class="c1"># Print summary without creating a Simulation object</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tud_sumo.simulation</span><span class="w"> </span><span class="kn">import</span> <span class="n">print_summary</span>
<span class="n">print_summary</span><span class="p">(</span><span class="s2">&quot;data/example_data.pkl&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code> *============================================================*
 |                      TUD-SUMO v3.2.2                       | 
 *============================================================*
 |                          A20_ITCS                          | 
 *============================================================*
 |                        Description:                        | 
 |   Example traffic controllers, with 2 ramp meters, 1 VSL   | 
 |        controller and 1 route guidance controller.         | 
 *============================================================*
 |                 Simulation Run: 25/03/2025                 | 
 |               17:13:43 - 17:13:58 (0:00:15)                | 
 *------------------------------------------------------------*
 | Number of Steps:                               500 (0-500) | 
 | Step Length:                                          1.0s | 
 | Avg. Step Duration:                                  0.03s | 
 | Units Type:                              Metric (km, km/h) | 
 | Seed:                                                    1 | 
 *============================================================*
 |                            Data                            | 
 *============================================================*
 |                        Vehicle Data                        | 
 *------------------------------------------------------------*
 |                       No. Vehicles:                        | 
 | Average:                                            736.24 | 
 | Peak:                                                 1211 | 
 | Final:                                                1211 | 
 | Overall TTS:                                       368118s | 
 * ---------------------------------------------------------- *
 |                   No. Waiting Vehicles:                    | 
 | Average:                                             23.43 | 
 | Peak:                                                   69 | 
 | Final:                                                  55 | 
 | Overall TWT:                                        11713s | 
 * ---------------------------------------------------------- *
 |                       Vehicle Delay:                       | 
 | Average:                                           392.71s | 
 | Peak:                                              788.69s | 
 | Final:                                              783.1s | 
 | Cumulative Delay:                               196352.73s | 
 * ---------------------------------------------------------- *
 |                    Vehicles to Depart:                     | 
 | Average:                                           1063.27 | 
 | Peak:                                                 2227 | 
 | Final:                                                2227 | 
 * ---------------------------------------------------------- *
 | Individual Data:                                        No | 
 *------------------------------------------------------------*
 |                         Trip Data                          | 
 *------------------------------------------------------------*
 | Incomplete Trips:                            1213 (65.18%) | 
 | Completed Trips:                               648 (34.8%) | 
 *------------------------------------------------------------*
 |                         Detectors                          | 
 *------------------------------------------------------------*
 |               Induction Loop Detectors: (15)               | 
 |       a13_ramp_inflow, cw_down_occ_0, cw_down_occ_1,       | 
 |  cw_down_occ_2, cw_down_occ_3, cw_up_occ_0, cw_up_occ_1,   | 
 |      cw_up_occ_2, rerouter_2, utsc_e_in, utsc_e_out,       | 
 |      utsc_n_in_1, utsc_n_in_2, utsc_w_in, utsc_w_out       | 
 |                                                            | 
 |              Multi-Entry-Exit Detectors: (7)               | 
 |    a13_ramp_queue, a13_rm_downstream, a13_rm_upstream,     | 
 |      cw_ramp_inflow, cw_ramp_queue, cw_rm_downstream,      | 
 |                       cw_rm_upstream                       | 
 *------------------------------------------------------------*
 |                       Tracked Edges                        | 
 *------------------------------------------------------------*
 | 126730026, 1191885773, 1191885771, 126730171, 1191885772,  | 
 |         948542172, 70944365, 308977078, 1192621075         | 
 *------------------------------------------------------------*
 |                     Tracked Junctions                      | 
 *------------------------------------------------------------*
 |                     utsc (Signalised)                      | 
 |           crooswijk_meter (Signalised, Metered)            | 
 |              a13_meter (Signalised, Metered)               | 
 *------------------------------------------------------------*
 |                        Controllers                         | 
 *------------------------------------------------------------*
 |                    Route Guidance: (1)                     | 
 |                          rerouter                          | 
 |                                                            | 
 |                 Variable Speed Limits: (1)                 | 
 |                            vsl                             | 
 *------------------------------------------------------------*
 |                    Event IDs &amp; Statuses                    | 
 *------------------------------------------------------------*
 |                 Active: incident_response                  | 
 |             Completed: incident_1, bottleneck              | 
 *------------------------------------------------------------*
</code></pre></div>
<p>The structure of a simulation data file can also be printed using the <code>Simulation.print_sim_data_struct()</code> or <code>print_sim_data_struct()</code> functions. This will print the structure of the <code>sim_data</code> dictionary as a tree, allowing you to see the exact keys and data types used in the data. An example of the output of <code>print_sim_data_struct()</code> is shown below.</p>
<p>Note that the dimensions of array are only displayed up to 2D. If an array has a higher dimension, this is denoted by a '<em>+</em>'. If the array is inhomogeneous (ie. its dimensions are inconsistent), this is denoted by a '<em>*</em>' and the array's maximum size is shown.</p>
<div class="highlight"><pre><span></span><code><span class="n">my_sim</span><span class="o">.</span><span class="n">print_sim_data_struct</span><span class="p">()</span>

<span class="c1"># Print structure without creating a Simulation object</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tud_sumo.simulation</span><span class="w"> </span><span class="kn">import</span> <span class="n">print_sim_data_struct</span>
<span class="n">print_sim_data_struct</span><span class="p">(</span><span class="s2">&quot;data/example_data.pkl&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>A20_ITCS:
  ├─- scenario_name: str
  ├─- scenario_desc: str
  ├─- tuds_version: str
  ├─- data:
  |     ├─- detectors:
  |     |     ├─- a13_ramp_queue:
  |     |     |     ├─- type: str
  |     |     |     ├─- position:
  |     |     |     |     ├─- entry_lanes: tuple (1x1)
  |     |     |     |     ├─- exit_lanes: tuple (1x1)
  |     |     |     |     ├─- entry_positions: tuple (1x1)
  |     |     |     |     └─- exit_positions: tuple (1x1)
  |     |     |     ├─- speeds: list (1x500)
  |     |     |     ├─- vehicle_counts: list (1x500)
  |     |     |     └─- vehicle_ids: list (500x28*)
  .     .     .
  .     .     .
  .     .     .
  |     ├─- vehicles:
  |     |     ├─- no_vehicles: list (1x500)
  |     |     ├─- no_waiting: list (1x500)
  |     |     ├─- tts: list (1x500)
  |     |     ├─- twt: list (1x500)
  |     |     ├─- delay: list (1x500)
  |     |     └─- to_depart: list (1x500)
  |     └─- trips:
  |           ├─- incomplete: dict (1x1213)
  |           └─- completed: dict (1x648)
  ├─- start: int
  ├─- end: int
  ├─- step_len: float
  ├─- units: str
  ├─- seed: int
  ├─- sim_start: str
  └─- sim_end: str
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>